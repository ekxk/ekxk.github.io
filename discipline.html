<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="style.css" type="text/css">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Daily Tracker v1</title>
  
</head>
<body>

  <h1>Daily Tracker v1</h1>
  <div class="date">매일 운동</div>

  <div id="tracker"></div>

  <button onclick="exportCSV()">Export CSV</button>

<script>
  /**********************
   * CONFIG — EDIT HERE
   **********************/
  const START_DATE = "2026-01-12";

  const ACTIONS = [
    "pushup",
    "dumbbell",
    "deadHang"
  ];

  const ACTION_LABELS = {
    pushup: "Push-up",
    dumbbell: "Dumbbell",
    deadHang: "Dead hang"
  };

  const STORAGE_KEY = "disciplineTracker";

  /**********************
   * HELPERS
   **********************/
  function getDateRange(start, end) {
    const dates = [];
    let current = new Date(start);
    const last = new Date(end);

    while (current <= last) {
      dates.push(current.toISOString().slice(0, 10));
      current.setDate(current.getDate() + 1);
    }

    return dates.reverse(); // latest first
  }

  /**********************
   * LOAD DATA
   **********************/
  const allData = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};
  const today = new Date().toISOString().slice(0, 10);

  const dates = getDateRange(START_DATE, today);
  const container = document.getElementById("tracker");

  dates.forEach(date => {
    if (!allData[date]) {
      allData[date] = {};
    }

    const dayBlock = document.createElement("div");
    dayBlock.style.border = "1px solid #ddd";
    dayBlock.style.borderRadius = "8px";
    dayBlock.style.padding = "10px";
    dayBlock.style.marginBottom = "12px";

    const title = document.createElement("div");
    title.textContent = date;
    title.style.fontWeight = "bold";
    title.style.marginBottom = "6px";
    dayBlock.appendChild(title);

    ACTIONS.forEach(action => {
      const label = document.createElement("label");
      label.style.display = "block";
      label.style.fontSize = "14px";

      const checkbox = document.createElement("input");
      checkbox.type = "checkbox";
      checkbox.checked = !!allData[date][action];
      checkbox.style.marginRight = "6px";

      checkbox.addEventListener("change", () => {
        allData[date][action] = checkbox.checked;
        localStorage.setItem(STORAGE_KEY, JSON.stringify(allData));
      });

      label.appendChild(checkbox);
      label.appendChild(document.createTextNode(ACTION_LABELS[action]));
      dayBlock.appendChild(label);
    });

    container.appendChild(dayBlock);
  });

  /**********************
   * EXPORT CSV
   **********************/
  function exportCSV() {
    let header = ["date", ...ACTIONS];
    let rows = [header.join(",")];

    Object.keys(allData).sort().forEach(date => {
      const row = [date];
      ACTIONS.forEach(action => {
        row.push(allData[date][action] ? 1 : 0);
      });
      rows.push(row.join(","));
    });

    const blob = new Blob([rows.join("\n")], { type: "text/csv" });
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "discipline_tracker.csv";
    a.click();
  }
</script>
</body>
</html>
